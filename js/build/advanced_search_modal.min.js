/**
 * @file bootstrap_dss_digital Theme by the Lafayette College Libraries last built on 2014-04-29
 * @see {@link https://github.com/LafayetteCollegeLibraries Lafayette College Libraries}
 */
!function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options&&this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c),this.isShown||c.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in").attr("aria-hidden",!1),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")}))},hide:function(b){b&&b.preventDefault();b=a.Event("hide"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]===a.target||b.$element.has(a.target).length||b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){27==b.which&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b):b()):b&&b()}};var c=a.fn.modal;a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),"object"==typeof c&&c);e||d.data("modal",e=new b(this,f)),"string"==typeof c?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})});var d=function(b,c){this.options=a.extend({width:262,widthOffset:0,heightOffset:0},c),this.$element=a(b),this.dismissEvent="click.dismiss."+this.$element.attr("id")+".modal",this.$element.delegate("."+this.$element.attr("id")+'-close[data-dismiss="modal"]',this.dismissEvent,a.proxy(this.hide,this)),a(document).mousedown(function(b){a(document).data("LafayetteDssModal",{$lastTarget:a(b.target),$element:this.$element})}),this.options&&this.options.remote&&this.$element.find(".modal-body").load(this.options.remote),this.shownWidth=parseInt(this.options.width),this.widthOffset=parseInt(this.options.widthOffset),this.heightOffset=parseInt(this.options.heightOffset),this.anchorAlign=this.options.anchorAlign,this.isSmartPhoneAgent=/Android.*?(?:Mobile)|iPhone|Windows Mobile/i.test(navigator.userAgent)||320==a(window).width()&&480==a(window).height||480==a(window).width()&&320==a(window).height};d.prototype={constructor:d,toggle:b.prototype.toggle,show:function(b,c){var d=this,e=a(b),c=a.extend(c,{direction:"up"});d.$element.css("z-index",Math.floor((new Date).getTime()/1e4%2*1e5));var f=a.Event("show");if(this.$element.trigger(f),!this.isShown&&!f.isDefaultPrevented()){this.isShown=!0,this.escape();var g=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(document.body),d.$element.attr("aria-hidden",!1),d.$element.find("form").submit(function(b){"islandora-dss-solr-advanced-search-form"!=a(this).attr("id")&&(b.preventDefault(),a(document).data("LafayetteDssModal.lastForm",a(this)),a(this).find(".required").filter(function(){return""==a(this).val()}).length?a('<div class="alert alert-block alert-error"><a href="#" data-dismiss="alert" class="close">Ã—</a><h4 class="element-invisible">Error message</h4><ul><li>Your Name field is required.</li><li>Your E-Mail Address field is required.</li><li>Subject field is required.</li><li>Message field is required.</li></ul></div>').hide().prependTo(a(this).prev()).show(a.extend("slide",{direction:"down"},function(){setTimeout(function(){a(document).data("LafayetteDssModal.lastForm").parent().find(".alert").hide("slide",{direction:"up"})},1500)})):a.post(a(this).attr("action"),a(this).serialize(),function(){d.hide()}).fail(function(){d.hide()}))}),d.$element.addClass("shown");var h=a(".navbar-inner");if(a(document).data("LafayetteDssModal.navbar.offset.top",h.offset().top),d.anchorAlign?(d.$element.css("top",Math.floor(e.offset().top-e[0].offsetWidth/4+d.heightOffset)),d.isSmartPhoneAgent?d.$element.css("left","auto"):d.$element.css("left",Math.floor(e.offset().left-d.shownWidth+e.width()+e[0].offsetWidth/4+d.widthOffset))):d.$element.css("top",h.offset().top+h.height()),d.$element.focus().trigger("shown"),d.$element.insertAfter(a(".navbar-inner")),"contact"==d.$element.attr("id")){d.$element.show(),window.setTimeout(function(){jQuery("#contact.lafayette-dss-modal .modal-dialog").addClass("shown-faded")},100);var i=d.$element;a(document).data("LafayetteDssModal."+a(i).attr("id")+".offset.top",a(i).offset().top),a(i).find("input.form-text:first").focus(),a(i).focusin(function(){a(document).data("LafayetteDssModal.focusedModal",d)}).off("focusout").focusout(function(){a(document).data("LafayetteDssModal.focusedModal",null);var b=a(document).data("LafayetteDssModal.focusedModal");b?("undefined"==typeof a(document).data("LafayetteDssModal")||!a(document).data("LafayetteDssModal").$lastTarget.is(a(i))&&!a(document).data("LafayetteDssModal").$lastTarget.parents("#"+b.$element.attr("id")).length)&&d.hide():d.hide()}),a(window).scroll(function(){a(".lafayette-dss-modal.shown").each(function(b,c){var d=a(document).data("LafayetteDssModal."+a(c).attr("id")+".offset.top"),e=a(".navbar-inner").offset().top;a(document).data("LafayetteDssModal.navbar.offset.top")&&0!=a(window).scrollTop()||(a(document).data("LafayetteDssModal.navbar.offset.top",e),0==a(window).scrollTop()&&a(document).height()-a(c).scrollTop()-a(c).height()&&a(c).css("top",d)),a(window).scrollTop()<e&&a(document).height()-a(document).scrollTop()>a(c).height()&&a(c).css("top",d);var f=a(".navbar-inner.affix");f.length>0&&a(document).height()-a(document).scrollTop()>a(c).height()?(a(c).addClass("affixed"),a(c).css("top",a(c).css("top")+a(window).scrollTop())):a(c).removeClass("affixed")})})}else d.$element.show({effect:"slide",direction:"up",duration:500,complete:function(){d.$element;a(document).data("LafayetteDssModal."+a(this).attr("id")+".offset.top",a(this).offset().top),"advanced-search-modal"==a(this).attr("id")?a(this).find("input.form-text:first").focus():a(this).focus(),a(document).data("LafayetteDssModal.focusedModal",d),a(this).focusin(function(){a(document).data("LafayetteDssModal.focusedModal",d)}).off("focusout").focusout(function(){var b=a(document).data("LafayetteDssModal.focusedModal");b?a(document).data("LafayetteDssModal").$lastTarget.is(a(this))||a(document).data("LafayetteDssModal").$lastTarget.parents("#"+b.$element.attr("id")).length||d.hide():d.hide()}),a(window).scroll(function(){a(".lafayette-dss-modal.shown").each(function(b,c){var d=a(document).data("LafayetteDssModal."+a(c).attr("id")+".offset.top"),e=a(".navbar-inner").offset().top;a(document).data("LafayetteDssModal.navbar.offset.top")&&0!=a(window).scrollTop()||(a(document).data("LafayetteDssModal.navbar.offset.top",e),0==a(window).scrollTop()&&a(document).height()-a(c).scrollTop()-a(c).height()&&a(c).css("top",d)),a(window).scrollTop()<e&&a(document).height()-a(document).scrollTop()>a(c).height()&&a(c).css("top",d);var f=a(".navbar-inner.affix");f.length>0&&a(document).height()-a(document).scrollTop()>a(c).height()?(a(c).addClass("affixed"),a(c).css("top",d+a(window).scrollTop()-a(document).data("LafayetteDssModal.navbar.offset.top"))):a(c).removeClass("affixed")})})}});d.$element.addClass("shown");var h=a(".navbar-inner");g&&d.$element[0].offsetWidth}},hide:function(b){b&&b.preventDefault();var c=this;b=a.Event("hide"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.modal"),this.$element.off("focusout"),a(document).data("LafayetteDssModal.focusedModal")==c&&a(document).data("LafayetteDssModal.focusedModal",null),this.$element.removeClass("in").attr("aria-hidden",!0),this.$element.find('[data-toggle="popover"]').each(function(b,c){a(c).popover("hide")}),this.hideModal())},enforceFocus:b.prototype.enforceFocus,escape:b.prototype.escape,hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(b){var c=this,b=a.extend(b,{direction:"up"});"contact"==c.$element.attr("id")?(jQuery("#contact.lafayette-dss-modal .modal-dialog").removeClass("shown-faded"),window.setTimeout(function(){c.$element.hide()},100)):this.$element.hide(a.extend(b,{effect:"slide"})),this.backdrop(function(){c.removeBackdrop(),c.$element.trigger("hidden")})},removeBackdrop:b.prototype.removeBackdrop,backdrop:b.prototype.backdrop};var c=a.fn.lafayetteDssModal;a.fn.lafayetteDssModal=function(b,c){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},a.fn.lafayetteDssModal.defaults,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new d(this,g)),"string"==typeof b?f[b](c):g.show&&f.show(c)})},a.fn.lafayetteDssModal.defaults={backdrop:!0,keyboard:!0,show:!0,width:262,anchorAlign:!0},a.fn.lafayetteDssModal.Constructor=d,a.fn.lafayetteDssModal.noConflict=function(){return a.fn.lafayetteDssModal=c,this},a(document).on("click.bs.modal.data-api",'[data-toggle="lafayette-dss-modal"]',function(){var b=a(this),c=b.attr("href"),d=a(b.attr("data-target")||c&&c.replace(/.*(?=#[^\s]+$)/,"")),e=d.data("modal")?"toggle":a.extend({remote:!/#/.test(c)&&c},d.data(),b.data()),f=b.attr("data-width"),g=b.attr("data-width-offset"),h=b.attr("data-height-offset"),i=!0;b.attr("data-anchor-align")&&(i="true"==b.attr("data-anchor-align").toLowerCase()),e=a.extend(e,{width:f,"width-offset":g,"height-offset":h,anchorAlign:i}),d.lafayetteDssModal(e,this)})}(window.jQuery);